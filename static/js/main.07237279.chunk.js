(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{106:function(e,t,n){e.exports={preloader:"spinner_preloader__1jMg2",spinner:"spinner_spinner__1Hetg",spin:"spinner_spin__A_APw"}},107:function(e,t,n){e.exports={users:"users_users__1XLYr"}},108:function(e,t,n){e.exports={login:"login_login__VKdDU",descr:"login_descr__u0f4g"}},144:function(e,t,n){e.exports={profile:"profile_profile__1d7zg"}},145:function(e,t,n){e.exports={item:"post_item__1y2Bx"}},146:function(e,t,n){e.exports={postBlock:"myPosts_postBlock__1gIeR"}},152:function(e,t,n){e.exports={pageNotFound:"pageNotFound_pageNotFound__2eM4K"}},17:function(e,t,n){e.exports={navbar:"nav_navbar__1sgBY",items:"nav_items__1HLGi",item:"nav_item__7oIdo",active:"nav_active__1Qdkv"}},186:function(e,t,n){},19:function(e,t,n){e.exports={header:"header_header__18sGI",content:"header_content__15Dq1",submit:"header_submit__vXiCC",logo:"header_logo__esTHP",logo_auth:"header_logo_auth__2BghE",logo_noAuth:"header_logo_noAuth__emH4y",menu:"header_menu__2b9oq",active:"header_active__19EXb",settings:"header_settings__26DpH",loginBlock:"header_loginBlock__2ztlx"}},302:function(e,t,n){"use strict";n.r(t);var r,a,s=n(0),c=n(70),i=n.n(c),o=n(1),u=n.n(o),l=n(72),j=n(73),d=n(80),p=n(79),b=n(17),f=n.n(b),h=n(12),O=n(7),m=Object(O.b)()((function(){return Object(s.jsx)("nav",{className:f.a.navbar,children:Object(s.jsxs)("div",{className:f.a.items,children:[Object(s.jsx)("div",{className:f.a.item,children:Object(s.jsx)(h.b,{activeClassName:f.a.active,to:"/profile",children:"Profile"})}),Object(s.jsx)("div",{className:f.a.item,children:Object(s.jsx)(h.b,{activeClassName:f.a.active,to:"/dialogs",children:"Messages"})}),Object(s.jsx)("div",{className:f.a.item,children:Object(s.jsx)(h.b,{activeClassName:f.a.active,to:"/users",children:"Users"})}),Object(s.jsx)("div",{className:f.a.item,children:Object(s.jsx)(h.b,{activeClassName:f.a.active,to:"/news",children:"News"})}),Object(s.jsx)("div",{className:f.a.item,children:Object(s.jsx)(h.b,{activeClassName:f.a.active,to:"/music",children:"Music"})}),Object(s.jsx)("div",{className:f.a.item,children:Object(s.jsx)(h.b,{activeClassName:f.a.active,to:"/settings",children:"Settings"})})]})})})),x=n(13),g=(n(186),n(8)),v=n.n(g),_=n(15),S=n(3),E=n(142),N=n.n(E).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0",headers:{"API-KEY":"f68a4cda-2f4c-4785-816b-4190cdf2b12c"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r||(r={})),function(e){e[e.captcha=10]="captcha"}(a||(a={}));var P=n(30),w=function(){return N.get("/auth/me").then((function(e){return e.data}))},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return N.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:r})},C=function(){return N.delete("/auth/login")},y=function(){return N.get("/security/get-captcha-url").then((function(e){return e.data}))},k={isLoading:!1,userId:null,email:null,login:null,isAuth:!1,captcha:null},T=function(e,t,n){return{type:"AUTH/SET_USER_DATA",data:{userId:e,email:t,login:n}}},U=function(){return{type:"AUTH/DELETE_USER_DATA"}},I=function(e){return{type:"AUTH/SET_CAPTCHA_URL",url:e}},R=function(){return{type:"AUTH/CAPTCHA_SUCCESS"}},L=function(){return function(){var e=Object(_.a)(v.a.mark((function e(t){var n,a,s,c,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:(n=e.sent).resultCode===r.Success&&(a=n.data,s=a.id,c=a.login,i=a.email,t(T(s,i,c)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){return function(){var e=Object(_.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:e.sent.data.resultCode===r.Success&&t(U());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(){return function(){var e=Object(_.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:(n=e.sent).url&&t(I(n.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH/SET_USER_DATA":return Object(S.a)(Object(S.a)(Object(S.a)({},e),t.data),{},{isAuth:!0});case"AUTH/DELETE_USER_DATA":return Object(S.a)(Object(S.a)({},e),{},{userId:null,email:null,login:null,isAuth:!1});case"AUTH/SET_CAPTCHA_URL":return Object(S.a)(Object(S.a)({},e),{},{captcha:t.url});case"AUTH/CAPTCHA_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{captcha:null});default:return e}},G=n(59);function H(e){return Object(O.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(t){var n=t.isAuth,r=Object(G.a)(t,["isAuth"]);return n?Object(s.jsx)(e,Object(S.a)({},r)):Object(s.jsx)(x.a,{to:"/login"})}))}var z,B=H((function(){var e=Object(O.c)();return Object(s.jsx)("div",{children:Object(s.jsx)("span",{onClick:function(){e(F())},children:"Logout"})})})),q=n(81),V=n.n(q),Y=n(60),K=n.n(Y),X=n.p+"static/media/avatar.00971467.png",J=function(e){var t=e.person,n=e.id,r="/dialogs/".concat(n);return Object(s.jsxs)(h.b,{to:r,activeClassName:K.a.active,className:K.a.dialog,children:[Object(s.jsx)("div",{className:K.a.photo,children:Object(s.jsx)("img",{src:X,alt:""})}),Object(s.jsx)("div",{className:K.a.name,children:t})]})},W=n(82),Z=n.n(W),Q=function(e){var t=e.label;return Object(s.jsxs)("div",{className:Z.a.message,children:[Object(s.jsx)("div",{className:Z.a.photo,children:Object(s.jsx)("img",{src:X,alt:"photo"})}),Object(s.jsx)("div",{className:Z.a.text,children:t})]})},$=n(39),ee={messages:[{id:1,message:"Ut enim ad minim veniam, quis nostrud exercitation  laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium."},{id:2,message:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}],dialogs:[{person:"Andrey",id:1},{person:"Sergey",id:2}]},te=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"DIALOGS/ADD_MESSAGE":return e={id:5,message:n.message},Object(S.a)(Object(S.a)({},t),{},{messages:[].concat(Object($.a)(t.messages),[e])});default:return t}},ne=n(11),re=n(138),ae=n(139),se=n(47),ce=n.n(se),ie=function(e){var t=e.meta,n=t.touched,r=t.error,a=e.children,c=n&&r,i=c?Object(s.jsx)("span",{children:r}):null;return Object(s.jsxs)("div",{className:c?ce.a.formControl+" "+ce.a.error:ce.a.formControl,children:[Object(s.jsx)("div",{children:a}),i]})},oe=function(e){var t=e.input,n=Object(G.a)(e,["input"]);return Object(s.jsx)(ie,Object(S.a)(Object(S.a)({},e),{},{children:Object(s.jsx)("textarea",Object(S.a)(Object(S.a)({},n),t))}))},ue=function(e){var t=e.input,n=Object(G.a)(e,["input"]);return Object(s.jsx)(ie,Object(S.a)(Object(S.a)({},e),{},{children:Object(s.jsx)("input",Object(S.a)(Object(S.a)({},t),n))}))},le=function(e){if(!e)return"Field is required"},je=Object(ae.a)({form:"addMessageForm"})((function(e){return Object(s.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(s.jsx)(re.a,{component:oe,name:"newMessageText",validate:[le]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{children:"Send"})})]})})),de=Object(ne.d)(H,Object(O.b)((function(e){return{dialogsData:e.dialogsPage.dialogs,messagesData:e.dialogsPage.messages}}),Object(S.a)({},{addNewMessage:function(e){return{type:"DIALOGS/ADD_MESSAGE",message:e}}})))((function(e){var t=e.dialogsData,n=e.messagesData,r=e.addNewMessage,a=t.map((function(e){var t=e.id,n=e.person;return Object(s.jsx)(J,{id:t,person:n},t)})),c=n.map((function(e){var t=e.message,n=e.id;return Object(s.jsx)(Q,{label:t},n)}));return Object(s.jsxs)("div",{className:V.a.dialogs,children:[Object(s.jsx)("div",{className:V.a.dialogsItems,children:a}),Object(s.jsxs)("div",{className:V.a.messages,children:[Object(s.jsx)("div",{children:c}),Object(s.jsx)(je,{onSubmit:function(e){var t=e.newMessageText;r(t)}})]})]})})),pe=n(144),be=n.n(pe),fe=n(40),he=n(84),Oe=n.n(he),me=n(106),xe=n.n(me),ge=function(){return Object(s.jsx)("div",{className:xe.a.preloader,children:Object(s.jsx)("div",{className:xe.a.spinner})})},ve=ge,_e=function(e){var t=e.status,n=e.updateStatus,r=Object(o.useState)(!1),a=Object(fe.a)(r,2),c=a[0],i=a[1],u=Object(o.useState)(t),l=Object(fe.a)(u,2),j=l[0],d=l[1];Object(o.useEffect)((function(){d(t)}),[t]);var p=c?Object(s.jsx)("input",{onBlur:function(){i(!1),n(j)},autoFocus:!0,type:"text",onChange:function(e){d(e.target.value)},value:j}):Object(s.jsx)("span",{onDoubleClick:function(){i(!0)},children:t||"..."});return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("div",{children:p})})},Se=n(137),Ee=Object(ae.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,n=e.profile,r=e.error,a=r?Object(s.jsx)("div",{className:ce.a.summaryError,children:r}):null,c=Object.keys(n.contacts).map((function(e){return Object(s.jsxs)("div",{children:[e," ",Object(s.jsx)(re.a,{name:"contacts.".concat(e),component:ue})]},e)}));return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(Se.a,{onSubmit:t,children:[Object(s.jsxs)("div",{children:["FullName: ",Object(s.jsx)(re.a,{name:"fullName",placeholder:"Your full name",validate:[le],component:ue})]}),Object(s.jsxs)("div",{children:["About me: ",Object(s.jsx)(re.a,{name:"aboutMe",placeholder:"About me",component:ue})]}),Object(s.jsxs)("div",{children:["looking for a job: ",Object(s.jsx)(re.a,{name:"lookingForAJob",component:ue,type:"checkbox"})]}),Object(s.jsxs)("div",{children:["My professional skills: ",Object(s.jsx)(re.a,{name:"lookingForAJobDescription",placeholder:"Your professional skills ?",component:oe})]}),c,Object(s.jsx)("div",{children:a}),Object(s.jsx)("button",{children:"Save"})]})})})),Ne=function(e){var t=e.contactTitle,n=e.contactValue;return Object(s.jsxs)("div",{children:[t," : ",n]})},Pe=function(e){var t=e.profile,n=e.toggleEditMode,r=e.isOwner,a=t.fullName,c=t.aboutMe,i=t.lookingForAJob,o=t.lookingForAJobDescription,u=t.contacts;return Object(s.jsxs)("div",{className:Oe.a.descr,children:["data",r?Object(s.jsx)("button",{onClick:n,children:"edit"}):null,Object(s.jsxs)("div",{children:["FullName: ",a]}),Object(s.jsxs)("div",{children:["About me: ",c]}),Object(s.jsx)("div",{children:i?"looking for a job":"lol job?"}),Object(s.jsxs)("div",{children:["Skills: ",i?o:null]}),Object(s.jsxs)("div",{children:["Contacts: ",Object.keys(u).map((function(e){return Object(s.jsx)(Ne,{contactTitle:e,contactValue:u[e]},e)}))]})]})},we=function(e){var t=e.profile,n=e.status,r=e.updateStatus,a=e.isOwner,c=e.savePhoto,i=e.saveProfile,u=Object(o.useState)(!1),l=Object(fe.a)(u,2),j=l[0],d=l[1],p=function(){d(!j)};if(!t)return Object(s.jsx)(ve,{});var b=t.photos;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:Oe.a.description,children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{className:Oe.a.profilePhoto,alt:"user photo",src:b.large||X}),a&&Object(s.jsx)("input",{onChange:function(e){var t;if(e.preventDefault(),1===(null===(t=e.target.files)||void 0===t?void 0:t.length)){var n=e.target.files[0];c(n)}},type:"file"}),Object(s.jsx)("b",{children:"status: "}),Object(s.jsx)(_e,{status:n,updateStatus:r})]}),j?Object(s.jsx)(Ee,{initialValues:t,profile:t,onSubmit:function(e){i(e).then((function(){p()}))}}):Object(s.jsx)(Pe,{isOwner:a,profile:t,toggleEditMode:p})]})})},Ae=n(145),Ce=n.n(Ae),ye=function(e){var t=e.img,n=e.text,r=e.likesCount;return Object(s.jsxs)("div",{className:Ce.a.item,children:[Object(s.jsx)("img",{src:t,alt:"avatar"}),n,Object(s.jsx)("div",{children:Object(s.jsxs)("span",{children:["like ",r]})})]})},ke=n(146),Te=n.n(ke),Ue=function(e){return N.get("/profile/".concat(e)).then((function(e){return e.data}))},Ie=function(e){return N.get("/profile/status/".concat(e)).then((function(e){return e.data}))},Re=function(e){return N.put("/profile/status",{status:e})},Le=function(e){var t=new FormData;return t.append("image",e),N.put("/profile/photo",t,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){return e.data}))},Fe=function(e){return N.put("/profile",e).then((function(e){return e.data}))},De={posts:[{img:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-512.png",text:"wow",likesCount:2,id:1}],profile:null,status:""},Me=function(e){return{type:"PROFILE/ADD-POST",postText:e}},Ge=function(e){return{type:"PROFILE/SET_PROFILE",profile:e}},He=function(e){return{type:"PROFILE/SET_STATUS",status:e}},ze=function(e){return{type:"PROFILE/SAVE_PHOTO_SUCCESS",photos:e}},Be=function(e){return function(){var t=Object(_.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ue(e);case 2:r=t.sent,n(Ge(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},qe=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"PROFILE/ADD-POST":return e={img:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-512.png",id:2,text:n.postText,likesCount:0},Object(S.a)(Object(S.a)({},t),{},{posts:[].concat(Object($.a)(t.posts),[e])});case"PROFILE/SET_PROFILE":return Object(S.a)(Object(S.a)({},t),{},{profile:n.profile});case"PROFILE/SET_STATUS":return Object(S.a)(Object(S.a)({},t),{},{status:n.status});case"PROFILE/DELETE_POST":return Object(S.a)(Object(S.a)({},t),{},{posts:t.posts.filter((function(e){return e.id!==n.id}))});case"PROFILE/SAVE_PHOTO_SUCCESS":return Object(S.a)(Object(S.a)({},t),{},{profile:Object(S.a)(Object(S.a)({},t.profile),{},{photos:n.photos})});case"PROFILE/SAVE_PROFILE_DATA_SUCCESS":return Object(S.a)(Object(S.a)({},t),{},{profile:Object(S.a)(Object(S.a)({},t.profile),n.profile)});default:return t}},Ve=(z=10,function(e){if(e.length>z)return"Max length is ".concat(z," symbols")}),Ye=Object(ae.a)({form:"postForm"})((function(e){return Object(s.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(s.jsx)(re.a,{placeholder:"Enter your post text",validate:[le,Ve],name:"postText",component:oe}),Object(s.jsx)("button",{children:"Add post"})]})})),Ke=Object(o.memo)((function(e){var t=e.postData,n=e.addNewPost,r=t.map((function(e){var t=e.img,n=e.text,r=e.id,a=e.likesCount;return Object(s.jsx)(ye,{img:t,text:n,likesCount:a},r)}));return Object(s.jsxs)("div",{className:Te.a.postBlock,children:[Object(s.jsx)("h3",{children:"My post"}),Object(s.jsx)("div",{children:"New post"}),Object(s.jsx)(Ye,{onSubmit:function(e){var t=e.postText;n(t)}}),Object(s.jsx)("div",{children:r})]})})),Xe=Me,Je=Object(O.b)((function(e){return{postData:e.profilePage.posts}}),{addNewPost:Xe})(Ke),We=function(e){var t=e.profile,n=e.status,r=e.updateStatus,a=e.isOwner,c=e.savePhoto,i=e.saveProfile;return Object(s.jsxs)("div",{className:be.a.profile,children:[Object(s.jsx)(we,{saveProfile:i,savePhoto:c,isOwner:a,status:n,profile:t,updateStatus:r}),Object(s.jsx)(Je,{})]})},Ze=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).savePhoto=function(t){(0,e.props.savePhoto)(t)},e.refreshProfileData=function(){var t=e.props,n=t.getProfile,r=t.match,a=t.getStatus,s=t.authUserId,c=+r.params.id;c||(c=s)||e.props.history.push("/login"),n(c),a(c)},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfileData()}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.refreshProfileData()}},{key:"render",value:function(){var e=this,t=this.props,n=t.profile,r=t.status,a=t.updateStatus,c=t.saveProfileData;return Object(s.jsx)(We,Object(S.a)(Object(S.a)({},this.props),{},{isOwner:!this.props.match.params.id,profile:n,status:r,savePhoto:function(t){return e.savePhoto(t)},updateStatus:a,saveProfile:c}))}}]),n}(o.Component),Qe=Object(ne.d)(H,x.g,Object(O.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authUserId:e.auth.userId}}),{getProfile:Be,getStatus:function(e){return function(){var t=Object(_.a)(v.a.mark((function t(n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ie(e);case 2:r=t.sent,n(He(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(_.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Re(e);case 2:t.sent.data.resultCode===r.Success&&n(He(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(_.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le(e);case 2:(a=t.sent).resultCode===r.Success&&n(ze(a.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfileData:function(e){return function(){var t=Object(_.a)(v.a.mark((function t(n,a){var s,c,i,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fe(e);case 2:if(s=t.sent,c=a().auth.userId,s.resultCode!==r.Success){t.next=12;break}if(null==c){t.next=9;break}n(Be(c)),t.next=10;break;case 9:throw new Error("User id can`t be null");case 10:t.next=16;break;case 12:return i=0!==s.messages.length?s.messages[0]:"some error",o=Object(P.a)("edit-profile",{_error:i}),n(o),t.abrupt("return",Promise.reject(s.messages[0]));case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}))(Ze),$e=n(41),et=n.n($e),tt=n.p+"static/media/Plus-Icon-PNG.ac4270cf.png",nt=n.p+"static/media/check.c4294ef8.png",rt=function(e){var t=e.fullName,n=e.onFollowClick,r=e.followStatus,a=e.photoUrl,c=e.status,i=e.id,o=e.followingInProgress;return Object(s.jsx)("div",{className:et.a.user,children:Object(s.jsxs)("div",{className:et.a.user,children:[Object(s.jsx)("div",{children:Object(s.jsx)(h.b,{to:"/profile/".concat(i),children:Object(s.jsx)("img",{src:a,alt:"user photo",className:et.a.user_photo})})}),Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:et.a.user_name,children:t}),Object(s.jsx)("div",{className:et.a.user_status,children:c})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{className:et.a.subscribe,disabled:o.some((function(e){return e===i})),onClick:n,children:Object(s.jsx)("img",{src:r?nt:tt,alt:"follow"})})})]})})},at=n(74),st=n(85),ct=n.n(st),it=n(147),ot=n.n(it),ut=function(e){for(var t=e.totalItemsCount,n=e.pageSize,r=e.currentPage,a=e.onPageChanged,c=e.portionSize,i=void 0===c?10:c,u=Math.ceil(t/n),l=[],j=1;j<=u;j++)l.push(j);var d=Math.ceil(u/i),p=Object(o.useState)(1),b=Object(fe.a)(p,2),f=b[0],h=b[1],O=(f-1)*i+1,m=f*i;return Object(s.jsxs)("div",{className:ct.a.paginator,children:[f>1&&Object(s.jsx)("button",{onClick:function(){h(f-1)},children:"PREV"}),l.filter((function(e){return e>=O&&e<=m})).map((function(e){return Object(s.jsx)("span",{className:ot()(Object(at.a)({},ct.a.selectedPage,r===e),ct.a.pageNumber),onClick:function(){a(e)},children:e},e)})),d>f&&Object(s.jsx)("button",{onClick:function(){h(f+1)},children:"NEXT"})]})},lt={getUsers:function(){var e=Object(_.a)(v.a.mark((function e(){var t,n,r,a,s,c=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,n=c.length>1&&void 0!==c[1]?c[1]:10,r=c.length>2&&void 0!==c[2]?c[2]:"",a=c.length>3&&void 0!==c[3]?c[3]:null,s="/users?page=".concat(t,"&count=").concat(n,"&term=").concat(r)+(null===a?"":"&friend=".concat(a)),e.abrupt("return",N.get(s).then((function(e){return e.data})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),followUser:function(e){return N.post("/follow/".concat(e)).then((function(e){return e.data}))},unFollowUser:function(e){return N.delete("/follow/".concat(e)).then((function(e){return e.data}))}},jt={users:[],pageSize:100,totalUsersCount:0,currentPage:1,isLoading:!1,followingInProgress:[],filter:{term:"",friend:null}},dt=function(){return{type:"USERS/TOGGLE_LOADING"}},pt=function(e){return{type:"USERS/SET_TOTAL_USERS_COUNT",usersCount:e}},bt=function(e){return{type:"USERS/SET_CURRENT_PAGE",pageNumber:e}},ft=function(e){return{type:"USERS/SET_USERS",users:e}},ht=function(e,t){return{type:"USERS/TOGGLE_FOLLOWING_PROGRESS",id:e,isFetching:t}},Ot=function(e){return{type:"USERS/TOGGLE_FOLLOW",id:e}},mt=function(e){return{type:"USERS/SET_FILTER",payload:e}},xt=function(e,t){return function(){var n=Object(_.a)(v.a.mark((function n(r,a){var s,c;return v.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(dt()),c=a().usersPage.filter,n.next=4,lt.getUsers(e,t,c.term,c.friend);case 4:s=n.sent,r(dt()),r(pt(s.totalCount)),r(ft(s.items));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},gt=function(){var e=Object(_.a)(v.a.mark((function e(t,n,a,s){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ht(n,!0)),e.next=3,s(n);case 3:e.sent.resultCode===r.Success&&(t(a(n)),t(ht(n,!1)));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS/SET_USERS":return Object(S.a)(Object(S.a)({},e),{},{users:Object($.a)(t.users)});case"USERS/TOGGLE_FOLLOW":return Object(S.a)(Object(S.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(S.a)(Object(S.a)({},e),{},{followed:!e.followed}):e}))});case"USERS/SET_TOTAL_USERS_COUNT":return Object(S.a)(Object(S.a)({},e),{},{totalUsersCount:t.usersCount});case"USERS/SET_CURRENT_PAGE":return Object(S.a)(Object(S.a)({},e),{},{currentPage:t.pageNumber});case"USERS/TOGGLE_LOADING":return Object(S.a)(Object(S.a)({},e),{},{isLoading:!e.isLoading});case"USERS/TOGGLE_FOLLOWING_PROGRESS":return Object(S.a)(Object(S.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object($.a)(e.followingInProgress),[t.id]):e.followingInProgress.filter((function(e){return e!==t.id}))});case"USERS/SET_FILTER":return Object(S.a)(Object(S.a)({},e),{},{filter:t.payload});default:return e}},_t=n(107),St=n.n(_t),Et=function(e){return e.usersPage.users},Nt=function(e){return e.usersPage.pageSize},Pt=function(e){return e.usersPage.totalUsersCount},wt=function(e){return e.usersPage.currentPage},At=function(e){return e.usersPage.isLoading},Ct=function(e){return e.usersPage.followingInProgress},yt=function(){var e=Object(O.d)(Pt),t=Object(O.d)(wt),n=Object(O.d)(Nt),r=Object(O.d)(Et),a=Object(O.d)(At),c=Object(O.d)(Ct),i=Object(O.c)();Object(o.useEffect)((function(){return i(xt(t,n)),function(){i(mt({friend:null,term:""}))}}),[]);var u=function(e){i(function(e){return function(){var t=Object(_.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:gt(n,e,Ot,lt.followUser);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},l=function(e){i(function(e){return function(){var t=Object(_.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:gt(n,e,Ot,lt.unFollowUser);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))},j=r.map((function(e){var t=e.id,n=e.name,r=e.status,a=e.followed,i=e.photos;return Object(s.jsx)(rt,{onFollowClick:function(){return a?l(t):u(t)},photoUrl:i.small?i.small:X,followStatus:a,fullName:n,status:r,id:t,followingInProgress:c},t)}));return Object(s.jsx)("div",{className:St.a.users,children:Object(s.jsxs)("div",{className:St.a.usersContainer,children:[a?Object(s.jsx)(ve,{}):j,Object(s.jsx)(ut,{totalItemsCount:e,pageSize:n,currentPage:t,onPageChanged:function(e){i(bt(e)),i(xt(e,n))}})]})})},kt=function(){var e=Object(O.d)(At);return Object(s.jsxs)(s.Fragment,{children:[e?Object(s.jsx)(ge,{}):null,Object(s.jsx)(yt,{})]})},Tt=n(19),Ut=n.n(Tt),It=n(61),Rt=function(e){var t=e.onSubmit;return Object(s.jsx)(It.c,{initialValues:{term:"",friend:"null"},onSubmit:function(e){var n={term:e.term,friend:"null"===e.friend?null:"false"!==e.friend};t(n)},children:function(){return Object(s.jsxs)(It.b,{children:[Object(s.jsx)(It.a,{type:"text",name:"term"}),Object(s.jsxs)(It.a,{as:"select",name:"friend",children:[Object(s.jsx)("option",{value:"null",children:"All"}),Object(s.jsx)("option",{value:"true",children:"Only followed"}),Object(s.jsx)("option",{value:"false",children:"Only unfollowed"})]}),Object(s.jsx)("button",{className:Ut.a.submit,type:"submit"})]})}})},Lt=u.a.memo(Rt),Ft=function(e){var t=e.onSearchSubmit;return Object(s.jsx)("div",{className:"_container",children:Object(s.jsxs)("div",{className:Ut.a.content,children:[Object(s.jsx)("h1",{className:Ut.a.logo+" "+Ut.a.logo_auth,children:"mashroom"}),Object(s.jsx)(Lt,{onSubmit:t}),Object(s.jsxs)("ul",{className:Ut.a.menu,children:[Object(s.jsx)("li",{children:Object(s.jsx)(h.b,{activeClassName:Ut.a.active,to:"/profile",children:"PROFILE"})}),Object(s.jsx)("li",{children:Object(s.jsx)(h.b,{activeClassName:Ut.a.active,to:"/users",children:"USERS"})}),Object(s.jsx)("li",{children:Object(s.jsx)(h.b,{activeClassName:Ut.a.active,to:"/dialogs",children:"MESSAGES"})}),Object(s.jsx)(h.b,{className:Ut.a.settings,activeClassName:Ut.a.active,to:"/settings"})]})]})})},Dt=function(e){var t=e.login,n=e.logout,r=e.isAuth,a=e.onSearchSubmit;return Object(s.jsx)("header",{className:Ut.a.header,children:r?Object(s.jsx)(Ft,{onSearchSubmit:a,login:t,logout:n}):Object(s.jsx)("h1",{className:Ut.a.logo_noAuth,children:"mashroom"})})},Mt=mt,Gt=Object(x.g)(Object(O.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,pageSize:e.usersPage.pageSize}}),{logout:F,requestUsers:xt,setFilter:Mt})((function(e){var t=e.isAuth,n=e.login,r=e.logout,a=e.pageSize,c=e.setFilter,i=e.requestUsers;return Object(s.jsx)(Dt,Object(S.a)(Object(S.a)({},e),{},{onSearchSubmit:function(t){c(t),"/users"!==e.location.pathname&&e.history.push("/users"),i(1,a)},logout:r,isAuth:t,login:n}))}))),Ht=n(36),zt=n.n(Ht),Bt=Object(ae.a)({form:"login"})((function(e){var t=e.error,n=e.captcha,r=e.handleSubmit,a=t?Object(s.jsx)("div",{className:zt.a.summaryError,children:t}):null;return Object(s.jsxs)("form",{className:zt.a.form,onSubmit:r,children:[Object(s.jsxs)("div",{className:zt.a.input,children:[Object(s.jsx)("div",{children:"Email"}),Object(s.jsx)(re.a,{validate:[le],type:"text",name:"email",placeholder:"login",component:ue})]}),Object(s.jsxs)("div",{className:zt.a.input,children:[Object(s.jsx)("div",{children:"Password"}),Object(s.jsx)(re.a,{validate:[le],type:"password",name:"password",placeholder:"password",component:ue})]}),Object(s.jsxs)("div",{className:zt.a.checkbox,children:[Object(s.jsx)(re.a,{type:"checkbox",name:"rememberMe",component:ue}),Object(s.jsx)("div",{className:zt.a.remember,children:"Remember me"})]}),a,n?Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{src:n,alt:"captcha"}),Object(s.jsx)(re.a,{placeholder:"captcha text",validate:[le],type:"text",name:"captcha",component:ue})]}):null,Object(s.jsx)("div",{className:zt.a.button,children:Object(s.jsx)("button",{children:"Login"})})]})})),qt=n(108),Vt=n.n(qt),Yt=function(e){return e.auth.captcha},Kt=function(e){return e.auth.isAuth},Xt=function(){var e=Object(O.d)(Yt),t=Object(O.d)(Kt),n=Object(O.c)();return t?Object(s.jsx)(x.a,{to:"/profile"}):Object(s.jsxs)("div",{className:Vt.a.login,children:[Object(s.jsx)(Bt,{captcha:e,onSubmit:function(e){var t=e.email,s=e.password,c=e.rememberMe,i=e.captcha;n(function(e,t,n,s){return function(){var c=Object(_.a)(v.a.mark((function c(i){var o,u,l;return v.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,A(e,t,n,s);case 2:(o=c.sent).data.resultCode===r.Success?(i(L()),i(R())):(u=0!==o.data.messages.length?o.data.messages[0]:"some error",l=Object(P.a)("login",{_error:u}),o.data.resultCode===a.captcha&&(i(l),i(D())),i(l));case 4:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(t,s,c,i))}}),Object(s.jsxs)("div",{className:Vt.a.descr,children:[Object(s.jsx)("p",{children:"Welcome to the mashroom"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:"Communication"}),Object(s.jsx)("li",{children:"News"}),Object(s.jsx)("li",{children:"Self-expression"})]})]})]})},Jt={initialized:!1},Wt=function(){return{type:"APP/INITIALIZED_SUCCESS"}},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/INITIALIZED_SUCCESS":return Object(S.a)(Object(S.a)({},e),{},{initialized:!0});default:return e}},Qt={friends:[{id:4,name:"Anton",photo:"https://im.kommersant.ru/Issues.photo/CORP/2019/03/01/KMO_111307_24199_1_t218_162046.jpg"},{id:4,name:"Anton",photo:"https://im.kommersant.ru/Issues.photo/CORP/2019/03/01/KMO_111307_24199_1_t218_162046.jpg"},{id:4,name:"Anton",photo:"https://im.kommersant.ru/Issues.photo/CORP/2019/03/01/KMO_111307_24199_1_t218_162046.jpg"},{id:4,name:"Anton",photo:"https://im.kommersant.ru/Issues.photo/CORP/2019/03/01/KMO_111307_24199_1_t218_162046.jpg"}]},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt;return e},en=n(150),tn=n(140),nn=n(151),rn=n.n(nn),an=Object(ne.c)({profilePage:qe,dialogsPage:te,sidebar:$t,usersPage:vt,auth:M,app:Zt,form:tn.a}),sn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ne.d,cn=Object(ne.e)(an,sn(Object(ne.a)(en.a,rn.a))),on=n(152),un=n.n(on),ln=function(){return Object(s.jsxs)("div",{className:un.a.pageNotFound,children:[Object(s.jsx)("img",{src:"http://vkclub.su/_data/stickers/gribson/sticker_vk_gribson_019.png",alt:""}),Object(s.jsxs)("p",{children:["Oooops! ",Object(s.jsx)("br",{})," Page not found"]})]})},jn=u.a.lazy((function(){return n.e(4).then(n.bind(null,303))})),dn=u.a.lazy((function(){return n.e(3).then(n.bind(null,304))})),pn=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).catchAllUnhandledErrors=function(){alert("some error occurred")},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.initializeApp)(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?Object(s.jsxs)("div",{className:"app",children:[Object(s.jsx)(Gt,{}),this.props.isAuth?Object(s.jsx)(m,{}):null,Object(s.jsx)("div",{className:"app-wrapper-content",children:Object(s.jsx)(o.Suspense,{fallback:Object(s.jsx)(ve,{}),children:Object(s.jsxs)(x.d,{children:[Object(s.jsx)(x.b,{exact:!0,path:"/",render:function(){return Object(s.jsx)(x.a,{to:"/profile"})}}),Object(s.jsx)(x.b,{path:"/profile/:id?",render:function(){return Object(s.jsx)(Qe,{})}}),Object(s.jsx)(x.b,{path:"/dialogs",render:function(){return Object(s.jsx)(de,{})}}),Object(s.jsx)(x.b,{path:"/music",component:dn}),Object(s.jsx)(x.b,{path:"/news",component:jn}),Object(s.jsx)(x.b,{path:"/users",component:kt}),Object(s.jsx)(x.b,{path:"/settings",component:B}),Object(s.jsx)(x.b,{path:"/login",component:Xt}),Object(s.jsx)(x.b,{path:"*",component:ln})]})})})]}):Object(s.jsx)(ve,{})}}]),n}(o.Component),bn=Object(ne.d)(x.g,Object(O.b)((function(e){return{initialized:e.app.initialized,isAuth:e.auth.isAuth}}),{initializeApp:function(){return function(){var e=Object(_.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(L()).then((function(){t(Wt())}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(pn),fn=function(){return Object(s.jsx)(h.a,{children:Object(s.jsx)(O.a,{store:cn,children:Object(s.jsx)(bn,{})})})};i.a.render(Object(s.jsx)(fn,{}),document.getElementById("root"))},36:function(e,t,n){e.exports={form:"loginForm_form__3Vb_K",input:"loginForm_input__ziBHz",checkbox:"loginForm_checkbox__3e9UO",remember:"loginForm_remember__jXYoO",button:"loginForm_button__1C0af"}},41:function(e,t,n){e.exports={user:"user_user__1hjSD",user_photo:"user_user_photo__15M4Y",user_name:"user_user_name__1beMh",user_status:"user_user_status__30yOH",subscribe:"user_subscribe__HXmuo"}},47:function(e,t,n){e.exports={formControl:"formControls_formControl__nwszG",error:"formControls_error__23Zih",summaryError:"formControls_summaryError__4h2HN"}},60:function(e,t,n){e.exports={dialog:"dialog_dialog__SgFmC",active:"dialog_active__2_S4l",name:"dialog_name__Ax5JM",photo:"dialog_photo__27FwB"}},81:function(e,t,n){e.exports={dialogs:"dialogs_dialogs__14W0_",messages:"dialogs_messages__Odv3N"}},82:function(e,t,n){e.exports={message:"message_message__2SYi-",text:"message_text__3wddD",photo:"message_photo__3wU4g"}},84:function(e,t,n){e.exports={description:"profileInfo_description__3o5_0",profilePhoto:"profileInfo_profilePhoto__splgS",contacts:"profileInfo_contacts__3I2Gx"}},85:function(e,t,n){e.exports={paginator:"paginator_paginator__2ARdb",pageNumber:"paginator_pageNumber__2YQgy",selectedPage:"paginator_selectedPage__2Px8m"}}},[[302,1,2]]]);
//# sourceMappingURL=main.07237279.chunk.js.map