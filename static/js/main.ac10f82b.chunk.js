(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{100:function(e,t,n){e.exports={dialog:"dialog_dialog__SgFmC",active:"dialog_active__2_S4l"}},103:function(e,t,n){e.exports={preloader:"spinner_preloader__1jMg2",spinner:"spinner_spinner__1Hetg",spin:"spinner_spin__A_APw"}},104:function(e,t,n){e.exports={header:"header_header__18sGI",loginBlock:"header_loginBlock__2ztlx"}},105:function(e,t,n){e.exports={login:"login_login__VKdDU",descr:"login_descr__u0f4g"}},139:function(e,t,n){},141:function(e,t,n){e.exports={profile:"profile_profile__1d7zg"}},142:function(e,t,n){e.exports={item:"post_item__1y2Bx"}},143:function(e,t,n){e.exports={postBlock:"myPosts_postBlock__1gIeR"}},145:function(e,t,n){e.exports={photo:"user_photo__3bUfE"}},17:function(e,t,n){e.exports={navbar:"nav_navbar__1sgBY",items:"nav_items__1HLGi",item:"nav_item__7oIdo",active:"nav_active__1Qdkv"}},184:function(e,t,n){},300:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(71),s=n.n(a),c=n(1),o=n.n(c),i=n(42),u=n(43),l=n(48),j=n(47),d=n(17),p=n.n(d),b=n(16),f=n(11),h=Object(f.b)()((function(){return Object(r.jsx)("nav",{className:p.a.navbar,children:Object(r.jsxs)("div",{className:p.a.items,children:[Object(r.jsx)("div",{className:p.a.item,children:Object(r.jsx)(b.b,{activeClassName:p.a.active,to:"/profile",children:"Profile"})}),Object(r.jsx)("div",{className:p.a.item,children:Object(r.jsx)(b.b,{activeClassName:p.a.active,to:"/dialogs",children:"Messages"})}),Object(r.jsx)("div",{className:p.a.item,children:Object(r.jsx)(b.b,{activeClassName:p.a.active,to:"/users",children:"Users"})}),Object(r.jsx)("div",{className:p.a.item,children:Object(r.jsx)(b.b,{activeClassName:p.a.active,to:"/news",children:"News"})}),Object(r.jsx)("div",{className:p.a.item,children:Object(r.jsx)(b.b,{activeClassName:p.a.active,to:"/music",children:"Music"})}),Object(r.jsx)("div",{className:p.a.item,children:Object(r.jsx)(b.b,{activeClassName:p.a.active,to:"/settings",children:"Settings"})})]})})})),O=n(12),m=(n(184),function(){return Object(r.jsx)("p",{children:"Settings"})}),g=n(3),x=n(78),v=n.n(x),_=n(100),S=n.n(_),E=function(e){var t=e.person,n=e.id,a="/dialogs/".concat(n);return Object(r.jsx)("div",{className:S.a.dialog+" "+S.a.active,children:Object(r.jsx)(b.b,{to:a,children:t})})},P=n(139),w=n.n(P),C=function(e){var t=e.label;return Object(r.jsx)("div",{className:w.a.message,children:t})},A=n(38),y={messages:[{id:1,message:"hey"},{id:2,message:"lol"}],dialogs:[{person:"Andrey",id:1},{person:"Sergey",id:2}]},U=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"DIALOGS/ADD_MESSAGE":return e={id:5,message:n.message},Object(g.a)(Object(g.a)({},t),{},{messages:[].concat(Object(A.a)(t.messages),[e])});default:return t}},N=n(61);function T(e){return Object(f.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(t){var n=t.isAuth,a=Object(N.a)(t,["isAuth"]);return n?Object(r.jsx)(e,Object(g.a)({},a)):Object(r.jsx)(O.a,{to:"/login"})}))}var k,I,F=n(8),L=n(135),R=n(136),D=n(49),M=n.n(D),G=function(e){var t=e.meta,n=t.touched,a=t.error,s=e.children,c=n&&a,o=c?Object(r.jsx)("span",{children:a}):null;return Object(r.jsxs)("div",{className:c?M.a.formControl+" "+M.a.error:M.a.formControl,children:[Object(r.jsx)("div",{children:s}),o]})},z=function(e){var t=e.input,n=Object(N.a)(e,["input"]);return Object(r.jsx)(G,Object(g.a)(Object(g.a)({},e),{},{children:Object(r.jsx)("textarea",Object(g.a)(Object(g.a)({},n),t))}))},H=function(e){var t=e.input,n=Object(N.a)(e,["input"]);return Object(r.jsx)(G,Object(g.a)(Object(g.a)({},e),{},{children:Object(r.jsx)("input",Object(g.a)(Object(g.a)({},t),n))}))},B=function(e){if(!e)return"Field is required"},V=Object(R.a)({form:"addMessageForm"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)(L.a,{component:z,name:"newMessageText",validate:[B]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"Send"})})]})})),W=Object(F.d)(T,Object(f.b)((function(e){return{dialogsData:e.dialogsPage.dialogs,messagesData:e.dialogsPage.messages}}),Object(g.a)({},{addNewMessage:function(e){return{type:"DIALOGS/ADD_MESSAGE",message:e}}})))((function(e){var t=e.dialogsData,n=e.messagesData,a=e.addNewMessage,s=t.map((function(e){var t=e.id,n=e.person;return Object(r.jsx)(E,{id:t,person:n},t)})),c=n.map((function(e){var t=e.message,n=e.id;return Object(r.jsx)(C,{label:t},n)}));return Object(r.jsxs)("div",{className:v.a.dialogs,children:[Object(r.jsx)("div",{className:v.a.dialogsItems,children:s}),Object(r.jsxs)("div",{className:v.a.messages,children:[Object(r.jsx)("div",{children:c}),Object(r.jsx)(V,{onSubmit:function(e){var t=e.newMessageText;a(t)}})]})]})})),K=n(141),J=n.n(K),Y=n(39),q=n(80),X=n.n(q),Z=n(103),Q=n.n(Z),$=function(){return Object(r.jsx)("div",{className:Q.a.preloader,children:Object(r.jsx)("div",{className:Q.a.spinner})})},ee=n.p+"static/media/avatar.00971467.png",te=function(e){var t=e.status,n=e.updateStatus,a=Object(c.useState)(!1),s=Object(Y.a)(a,2),o=s[0],i=s[1],u=Object(c.useState)(t),l=Object(Y.a)(u,2),j=l[0],d=l[1];Object(c.useEffect)((function(){d(t)}),[t]);var p=o?Object(r.jsx)("input",{onBlur:function(){i(!1),n(j)},autoFocus:!0,type:"text",onChange:function(e){d(e.target.value)},value:j}):Object(r.jsx)("span",{onDoubleClick:function(){i(!0)},children:t||"..."});return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{children:p})})},ne=n(126),re=Object(R.a)({form:"edit-profile"})((function(e){var t=e.handleSubmit,n=e.profile,a=e.error,s=a?Object(r.jsx)("div",{className:M.a.summaryError,children:a}):null,c=Object.keys(n.contacts).map((function(e){return Object(r.jsxs)("div",{children:[e," ",Object(r.jsx)(L.a,{name:"contacts.".concat(e),component:H})]},e)}));return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(ne.a,{onSubmit:t,children:[Object(r.jsxs)("div",{children:["FullName: ",Object(r.jsx)(L.a,{name:"fullName",placeholder:"Your full name",validate:[B],component:H})]}),Object(r.jsxs)("div",{children:["About me: ",Object(r.jsx)(L.a,{name:"aboutMe",placeholder:"About me",component:H})]}),Object(r.jsxs)("div",{children:["looking for a job: ",Object(r.jsx)(L.a,{name:"lookingForAJob",component:H,type:"checkbox"})]}),Object(r.jsxs)("div",{children:["My professional skills: ",Object(r.jsx)(L.a,{name:"lookingForAJobDescription",placeholder:"Your professional skills ?",component:z})]}),c,Object(r.jsx)("div",{children:s}),Object(r.jsx)("button",{children:"Save"})]})})})),ae=function(e){var t=e.contactTitle,n=e.contactValue;return Object(r.jsxs)("div",{children:[t," : ",n]})},se=function(e){var t=e.profile,n=e.toggleEditMode,a=e.isOwner,s=t.fullName,c=t.aboutMe,o=t.lookingForAJob,i=t.lookingForAJobDescription,u=t.contacts;return Object(r.jsxs)("div",{className:X.a.descr,children:["data",a?Object(r.jsx)("button",{onClick:n,children:"edit"}):null,Object(r.jsxs)("div",{children:["FullName: ",s]}),Object(r.jsxs)("div",{children:["About me: ",c]}),Object(r.jsx)("div",{children:o?"looking for a job":"job?"}),Object(r.jsxs)("div",{children:["Skills: ",o?i:null]}),Object(r.jsxs)("div",{children:["Contacts: ",Object.keys(u).map((function(e){return Object(r.jsx)(ae,{contactTitle:e,contactValue:u[e]},e)}))]})]})},ce=function(e){var t=e.profile,n=e.status,a=e.updateStatus,s=e.isOwner,o=e.savePhoto,i=e.saveProfile,u=Object(c.useState)(!1),l=Object(Y.a)(u,2),j=l[0],d=l[1],p=function(){d(!j)};if(!t)return Object(r.jsx)($,{});var b=t.photos;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:X.a.description,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("img",{className:X.a.profilePhoto,alt:"user photo",src:b.large||ee}),s&&Object(r.jsx)("input",{onChange:function(e){var t;if(e.preventDefault(),1===(null===(t=e.target.files)||void 0===t?void 0:t.length)){var n=e.target.files[0];o(n)}},type:"file"}),Object(r.jsx)("b",{children:"status: "}),Object(r.jsx)(te,{status:n,updateStatus:a})]}),j?Object(r.jsx)(re,{initialValues:t,profile:t,onSubmit:function(e){i(e).then((function(){p()}))}}):Object(r.jsx)(se,{isOwner:s,profile:t,toggleEditMode:p})]})})},oe=n(142),ie=n.n(oe),ue=function(e){var t=e.img,n=e.text,a=e.likesCount;return Object(r.jsxs)("div",{className:ie.a.item,children:[Object(r.jsx)("img",{src:t,alt:"avatar"}),n,Object(r.jsx)("div",{children:Object(r.jsxs)("span",{children:["like ",a]})})]})},le=n(143),je=n.n(le),de=n(7),pe=n.n(de),be=n(14),fe=n(144),he=n.n(fe).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0",headers:{"API-KEY":"f68a4cda-2f4c-4785-816b-4190cdf2b12c"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(k||(k={})),function(e){e[e.captcha=10]="captcha"}(I||(I={}));var Oe,me=n(25),ge=function(e){return he.get("/profile/".concat(e)).then((function(e){return e.data}))},xe=function(e){return he.get("/profile/status/".concat(e)).then((function(e){return e.data}))},ve=function(e){return he.put("/profile/status",{status:e})},_e=function(e){var t=new FormData;return t.append("image",e),he.put("/profile/photo",t,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){return e.data}))},Se=function(e){return he.put("/profile",e).then((function(e){return e.data}))},Ee={posts:[{img:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-512.png",text:"wow",likesCount:2,id:1}],profile:null,status:""},Pe=function(e){return{type:"PROFILE/ADD-POST",postText:e}},we=function(e){return{type:"PROFILE/SET_PROFILE",profile:e}},Ce=function(e){return{type:"PROFILE/SET_STATUS",status:e}},Ae=function(e){return{type:"PROFILE/SAVE_PHOTO_SUCCESS",photos:e}},ye=function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){var r;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ge(e);case 2:r=t.sent,n(we(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ue=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"PROFILE/ADD-POST":return e={img:"https://cdn4.iconfinder.com/data/icons/small-n-flat/24/user-alt-512.png",id:2,text:n.postText,likesCount:0},Object(g.a)(Object(g.a)({},t),{},{posts:[].concat(Object(A.a)(t.posts),[e])});case"PROFILE/SET_PROFILE":return Object(g.a)(Object(g.a)({},t),{},{profile:n.profile});case"PROFILE/SET_STATUS":return Object(g.a)(Object(g.a)({},t),{},{status:n.status});case"PROFILE/DELETE_POST":return Object(g.a)(Object(g.a)({},t),{},{posts:t.posts.filter((function(e){return e.id!==n.id}))});case"PROFILE/SAVE_PHOTO_SUCCESS":return Object(g.a)(Object(g.a)({},t),{},{profile:Object(g.a)(Object(g.a)({},t.profile),{},{photos:n.photos})});case"PROFILE/SAVE_PROFILE_DATA_SUCCESS":return Object(g.a)(Object(g.a)({},t),{},{profile:Object(g.a)(Object(g.a)({},t.profile),n.profile)});default:return t}},Ne=(Oe=10,function(e){if(e.length>Oe)return"Max length is ".concat(Oe," symbols")}),Te=Object(R.a)({form:"postForm"})((function(e){return Object(r.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(r.jsx)(L.a,{placeholder:"Enter your post text",validate:[B,Ne],name:"postText",component:z}),Object(r.jsx)("button",{children:"Add post"})]})})),ke=Object(c.memo)((function(e){var t=e.postData,n=e.addNewPost,a=t.map((function(e){var t=e.img,n=e.text,a=e.id,s=e.likesCount;return Object(r.jsx)(ue,{img:t,text:n,likesCount:s},a)}));return Object(r.jsxs)("div",{className:je.a.postBlock,children:[Object(r.jsx)("h3",{children:"My post"}),Object(r.jsx)("div",{children:"New post"}),Object(r.jsx)(Te,{onSubmit:function(e){var t=e.postText;n(t)}}),Object(r.jsx)("div",{children:a})]})})),Ie=Pe,Fe=Object(f.b)((function(e){return{postData:e.profilePage.posts}}),{addNewPost:Ie})(ke),Le=function(e){var t=e.profile,n=e.status,a=e.updateStatus,s=e.isOwner,c=e.savePhoto,o=e.saveProfile;return Object(r.jsxs)("div",{className:J.a.profile,children:[Object(r.jsx)(ce,{saveProfile:o,savePhoto:c,isOwner:s,status:n,profile:t,updateStatus:a}),Object(r.jsx)(Fe,{})]})},Re=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).savePhoto=function(t){(0,e.props.savePhoto)(t)},e.refreshProfileData=function(){var t=e.props,n=t.getProfile,r=t.match,a=t.getStatus,s=t.authUserId,c=+r.params.id;c||(c=s)||e.props.history.push("/login"),n(c),a(c)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfileData()}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.refreshProfileData()}},{key:"render",value:function(){var e=this,t=this.props,n=t.profile,a=t.status,s=t.updateStatus,c=t.saveProfileData;return Object(r.jsx)(Le,Object(g.a)(Object(g.a)({},this.props),{},{isOwner:!this.props.match.params.id,profile:n,status:a,savePhoto:function(t){return e.savePhoto(t)},updateStatus:s,saveProfile:c}))}}]),n}(c.Component),De=Object(F.d)(T,O.g,Object(f.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authUserId:e.auth.userId}}),{getProfile:ye,getStatus:function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){var r;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe(e);case 2:r=t.sent,n(Ce(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ve(e);case 2:t.sent.data.resultCode===k.Success&&n(Ce(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){var r;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e(e);case 2:(r=t.sent).resultCode===k.Success&&n(Ae(r.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfileData:function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n,r){var a,s,c,o;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se(e);case 2:if(a=t.sent,s=r().auth.userId,a.resultCode!==k.Success){t.next=12;break}if(null==s){t.next=9;break}n(ye(s)),t.next=10;break;case 9:throw new Error("User id can`t be null");case 10:t.next=16;break;case 12:return c=0!==a.messages.length?a.messages[0]:"some error",o=Object(me.b)("edit-profile",{_error:c}),n(o),t.abrupt("return",Promise.reject(a.messages[0]));case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}))(Re),Me={getUsers:function(){var e=Object(be.a)(pe.a.mark((function e(){var t,n,r,a,s,c=arguments;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,n=c.length>1&&void 0!==c[1]?c[1]:10,r=c.length>2&&void 0!==c[2]?c[2]:"",a=c.length>3&&void 0!==c[3]?c[3]:null,s="/users?page=".concat(t,"&count=").concat(n,"&term=").concat(r)+(null===a?"":"&friend=".concat(a)),e.abrupt("return",he.get(s).then((function(e){return e.data})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),followUser:function(e){return he.post("/follow/".concat(e)).then((function(e){return e.data}))},unFollowUser:function(e){return he.delete("/follow/".concat(e)).then((function(e){return e.data}))}},Ge={users:[],pageSize:100,totalUsersCount:0,currentPage:1,isLoading:!1,followingInProgress:[],filter:{term:"",friend:null}},ze=function(){return{type:"USERS/TOGGLE_LOADING"}},He=function(e){return{type:"USERS/SET_TOTAL_USERS_COUNT",usersCount:e}},Be=function(e){return{type:"USERS/SET_CURRENT_PAGE",pageNumber:e}},Ve=function(e){return{type:"USERS/SET_USERS",users:e}},We=function(e,t){return{type:"USERS/TOGGLE_FOLLOWING_PROGRESS",id:e,isFetching:t}},Ke=function(e){return{type:"USERS/TOGGLE_FOLLOW",id:e}},Je=function(e){return{type:"USERS/SET_FILTER",payload:e}},Ye=function(){var e=Object(be.a)(pe.a.mark((function e(t,n,r,a){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(We(n,!0)),e.next=3,a(n);case 3:e.sent.resultCode===k.Success&&(t(r(n)),t(We(n,!1)));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USERS/SET_USERS":return Object(g.a)(Object(g.a)({},e),{},{users:Object(A.a)(t.users)});case"USERS/TOGGLE_FOLLOW":return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e.id===t.id?Object(g.a)(Object(g.a)({},e),{},{followed:!e.followed}):e}))});case"USERS/SET_TOTAL_USERS_COUNT":return Object(g.a)(Object(g.a)({},e),{},{totalUsersCount:t.usersCount});case"USERS/SET_CURRENT_PAGE":return Object(g.a)(Object(g.a)({},e),{},{currentPage:t.pageNumber});case"USERS/TOGGLE_LOADING":return Object(g.a)(Object(g.a)({},e),{},{isLoading:!e.isLoading});case"USERS/TOGGLE_FOLLOWING_PROGRESS":return Object(g.a)(Object(g.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(A.a)(e.followingInProgress),[t.id]):e.followingInProgress.filter((function(e){return e!==t.id}))});case"USERS/SET_FILTER":return Object(g.a)(Object(g.a)({},e),{},{filter:t.payload});default:return e}},Xe=n(145),Ze=n.n(Xe),Qe=function(e){var t=e.fullName,n=e.onFollowClick,a=e.followStatus,s=e.location,c=e.photoUrl,o=e.status,i=e.id,u=e.followingInProgress,l=a?"unfollow":"follow";return Object(r.jsxs)("div",{children:[Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(b.b,{to:"/profile/".concat(i),children:Object(r.jsx)("img",{src:c,alt:"user photo",className:Ze.a.photo})})}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{disabled:u.some((function(e){return e===i})),onClick:n,children:l})})]}),Object(r.jsxs)("span",{children:[Object(r.jsxs)("span",{children:[Object(r.jsx)("div",{children:t}),Object(r.jsx)("div",{children:o})]}),Object(r.jsx)("span",{children:Object(r.jsx)("div",{children:s})})]})]})},$e=n(73),et=n(81),tt=n.n(et),nt=n(146),rt=n.n(nt),at=function(e){for(var t=e.totalItemsCount,n=e.pageSize,a=e.currentPage,s=e.onPageChanged,o=e.portionSize,i=void 0===o?10:o,u=Math.ceil(t/n),l=[],j=1;j<=u;j++)l.push(j);var d=Math.ceil(u/i),p=Object(c.useState)(1),b=Object(Y.a)(p,2),f=b[0],h=b[1],O=(f-1)*i+1,m=f*i;return Object(r.jsxs)("div",{className:tt.a.paginator,children:[f>1&&Object(r.jsx)("button",{onClick:function(){h(f-1)},children:"PREV"}),l.filter((function(e){return e>=O&&e<=m})).map((function(e){return Object(r.jsx)("span",{className:rt()(Object($e.a)({},tt.a.selectedPage,a===e),tt.a.pageNumber),onClick:function(){s(e)},children:e},e)})),d>f&&Object(r.jsx)("button",{onClick:function(){h(f+1)},children:"NEXT"})]})},st=n(62),ct=function(e){var t=e.onSubmit;return Object(r.jsx)("div",{children:Object(r.jsx)(st.c,{initialValues:{term:"",friend:"null"},onSubmit:function(e){var n={term:e.term,friend:"null"===e.friend?null:"false"!==e.friend};t(n)},children:function(){return Object(r.jsxs)(st.b,{children:[Object(r.jsx)(st.a,{type:"text",name:"term"}),Object(r.jsxs)(st.a,{as:"select",name:"friend",children:[Object(r.jsx)("option",{value:"null",children:"All"}),Object(r.jsx)("option",{value:"true",children:"Only followed"}),Object(r.jsx)("option",{value:"false",children:"Only unfollowed"})]}),Object(r.jsx)("button",{type:"submit",children:"Find!"})]})}})})},ot=o.a.memo(ct),it=function(e){var t=e.usersData,n=e.totalUsersCount,a=e.pageSize,s=e.currentPage,c=e.onPageChanged,o=e.followingInProgress,i=e.followUser,u=e.unFollowUser,l=e.isLoading,j=e.onFilterChanged,d=t.map((function(e){var t=e.id,n=e.name,a=e.status,s=e.followed,c=e.photos;return Object(r.jsx)(Qe,{onFollowClick:function(){return s?u(t):i(t)},photoUrl:c.small?c.small:ee,followStatus:s,fullName:n,location:"Russia",status:a,id:t,followingInProgress:o},t)}));return Object(r.jsxs)("div",{children:[Object(r.jsx)(ot,{onSubmit:j}),Object(r.jsx)(at,{totalItemsCount:n,pageSize:a,currentPage:s,onPageChanged:c}),l?Object(r.jsx)($,{}):d]})},ut=function(e){return e.usersPage.users},lt=function(e){return e.usersPage.pageSize},jt=function(e){return e.usersPage.totalUsersCount},dt=function(e){return e.usersPage.currentPage},pt=function(e){return e.usersPage.isLoading},bt=function(e){return e.usersPage.followingInProgress},ft=function(e){return e.usersPage.filter},ht=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){var n=e.props,r=n.pageSize,a=n.requestUsers;(0,n.setCurrentPage)(t),a(t,r)},e.onFilterChanged=function(t){var n=e.props,r=n.setFilter,a=n.requestUsers,s=n.pageSize;r(t),a(1,s)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;(0,e.requestUsers)(t,n)}},{key:"componentWillUnmount",value:function(){this.props.setFilter(this.props.filter)}},{key:"render",value:function(){var e=this.props,t=e.usersData,n=e.followUser,a=e.unFollowUser,s=e.totalUsersCount,c=e.pageSize,o=e.currentPage,i=e.isLoading,u=e.followingInProgress;return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(it,{onFilterChanged:this.onFilterChanged,isLoading:i,usersData:t,totalUsersCount:s,pageSize:c,currentPage:o,onPageChanged:this.onPageChanged,followingInProgress:u,followUser:n,unFollowUser:a})})}}]),n}(c.Component),Ot=Be,mt=Je,gt=Object(F.d)(Object(f.b)((function(e){return{usersData:ut(e),totalUsersCount:jt(e),pageSize:lt(e),currentPage:dt(e),isLoading:pt(e),followingInProgress:bt(e),filter:ft(e)}}),{requestUsers:function(e,t){return function(){var n=Object(be.a)(pe.a.mark((function n(r,a){var s,c;return pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(ze()),c=a().usersPage.filter,n.next=4,Me.getUsers(e,t,c.term,c.friend);case 4:s=n.sent,r(ze()),r(He(s.totalCount)),r(Ve(s.items));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},followUser:function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ye(n,e,Ke,Me.followUser);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unFollowUser:function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ye(n,e,Ke,Me.unFollowUser);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:Ot,setFilter:mt}))(ht),xt=n(104),vt=n.n(xt),_t=function(e){var t=e.isAuth,n=e.login,a=e.logout;return Object(r.jsxs)("header",{className:vt.a.header,children:[Object(r.jsx)("h1",{children:"mashroom"}),Object(r.jsx)("div",{className:vt.a.loginBlock,children:t?Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:n})," ",Object(r.jsx)("span",{onClick:a,children:"Logout"})]}):null})]})},St=function(){return he.get("/auth/me").then((function(e){return e.data}))},Et=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return he.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:r})},Pt=function(){return he.delete("/auth/login")},wt=function(){return he.get("/security/get-captcha-url").then((function(e){return e.data}))},Ct={isLoading:!1,userId:null,email:null,login:null,isAuth:!1,captcha:null},At=function(e,t,n){return{type:"AUTH/SET_USER_DATA",data:{userId:e,email:t,login:n}}},yt=function(){return{type:"AUTH/DELETE_USER_DATA"}},Ut=function(e){return{type:"AUTH/SET_CAPTCHA_URL",url:e}},Nt=function(){return{type:"AUTH/CAPTCHA_SUCCESS"}},Tt=function(){return function(){var e=Object(be.a)(pe.a.mark((function e(t){var n,r,a,s,c;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St();case 2:(n=e.sent).resultCode===k.Success&&(r=n.data,a=r.id,s=r.login,c=r.email,t(At(a,c,s)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},kt=function(){return function(){var e=Object(be.a)(pe.a.mark((function e(t){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt();case 2:(n=e.sent).url&&t(Ut(n.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH/SET_USER_DATA":return Object(g.a)(Object(g.a)(Object(g.a)({},e),t.data),{},{isAuth:!0});case"AUTH/DELETE_USER_DATA":return Object(g.a)(Object(g.a)({},e),{},{userId:null,email:null,login:null,isAuth:!1});case"AUTH/SET_CAPTCHA_URL":return Object(g.a)(Object(g.a)({},e),{},{captcha:t.url});case"AUTH/CAPTCHA_SUCCESS":return Object(g.a)(Object(g.a)({},e),{},{captcha:null});default:return e}},Ft=Object(f.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(be.a)(pe.a.mark((function e(t){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pt();case 2:e.sent.data.resultCode===k.Success&&t(yt());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.isAuth,n=e.login,a=e.logout;return Object(r.jsx)(_t,Object(g.a)(Object(g.a)({},e),{},{logout:a,isAuth:t,login:n}))})),Lt=n(35),Rt=n.n(Lt),Dt=Object(R.a)({form:"login"})((function(e){var t=e.error,n=e.captcha,a=e.handleSubmit,s=t?Object(r.jsx)("div",{className:Rt.a.summaryError,children:t}):null;return Object(r.jsxs)("form",{className:Rt.a.form,onSubmit:a,children:[Object(r.jsxs)("div",{className:Rt.a.input,children:[Object(r.jsx)("div",{children:"Email"}),Object(r.jsx)(L.a,{validate:[B],type:"text",name:"email",placeholder:"login",component:H})]}),Object(r.jsxs)("div",{className:Rt.a.input,children:[Object(r.jsx)("div",{children:"Password"}),Object(r.jsx)(L.a,{validate:[B],type:"password",name:"password",placeholder:"password",component:H})]}),Object(r.jsxs)("div",{className:Rt.a.checkbox,children:[Object(r.jsx)(L.a,{type:"checkbox",name:"rememberMe",component:H}),Object(r.jsx)("div",{className:Rt.a.remember,children:"Remember me"})]}),s,n?Object(r.jsxs)("div",{children:[Object(r.jsx)("img",{src:n,alt:"captcha"}),Object(r.jsx)(L.a,{placeholder:"captcha text",validate:[B],type:"text",name:"captcha",component:H})]}):null,Object(r.jsx)("div",{className:Rt.a.button,children:Object(r.jsx)("button",{children:"Login"})})]})})),Mt=n(105),Gt=n.n(Mt),zt=Object(f.b)((function(e){return{isAuth:e.auth.isAuth,captcha:e.auth.captcha}}),{login:function(e,t,n,r){return function(){var a=Object(be.a)(pe.a.mark((function a(s){var c,o,i;return pe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Et(e,t,n,r);case 2:(c=a.sent).data.resultCode===k.Success?(s(Tt()),s(Nt())):(o=0!==c.data.messages.length?c.data.messages[0]:"some error",i=Object(me.b)("login",{_error:o}),c.data.resultCode===I.captcha&&(s(i),s(kt())),s(i));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuth,a=e.captcha;return n?Object(r.jsx)(O.a,{to:"/profile"}):Object(r.jsxs)("div",{className:Gt.a.login,children:[Object(r.jsx)(Dt,{captcha:a,onSubmit:function(e,n){n(Object(me.a)("login"));var r=e.email,a=e.password,s=e.rememberMe,c=e.captcha;t(r,a,s,c)}}),Object(r.jsxs)("div",{className:Gt.a.descr,children:[Object(r.jsx)("p",{children:"Welcome to the mashroom"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Communication"}),Object(r.jsx)("li",{children:"News"}),Object(r.jsx)("li",{children:"Self-expression"})]})]})]})})),Ht={initialized:!1},Bt=function(){return{type:"APP/INITIALIZED_SUCCESS"}},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/INITIALIZED_SUCCESS":return Object(g.a)(Object(g.a)({},e),{},{initialized:!0});default:return e}},Wt={friends:[{id:4,name:"Anton",photo:"https://im.kommersant.ru/Issues.photo/CORP/2019/03/01/KMO_111307_24199_1_t218_162046.jpg"},{id:4,name:"Anton",photo:"https://im.kommersant.ru/Issues.photo/CORP/2019/03/01/KMO_111307_24199_1_t218_162046.jpg"},{id:4,name:"Anton",photo:"https://im.kommersant.ru/Issues.photo/CORP/2019/03/01/KMO_111307_24199_1_t218_162046.jpg"},{id:4,name:"Anton",photo:"https://im.kommersant.ru/Issues.photo/CORP/2019/03/01/KMO_111307_24199_1_t218_162046.jpg"}]},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt;return e},Jt=n(149),Yt=n(137),qt=n(150),Xt=n.n(qt),Zt=Object(F.c)({profilePage:Ue,dialogsPage:U,sidebar:Kt,usersPage:qe,auth:It,app:Vt,form:Yt.a}),Qt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||F.d,$t=Object(F.e)(Zt,Qt(Object(F.a)(Jt.a,Xt.a))),en=o.a.lazy((function(){return n.e(4).then(n.bind(null,301))})),tn=o.a.lazy((function(){return n.e(3).then(n.bind(null,302))})),nn=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).catchAllUnhandledErrors=function(){alert("some error occurred")},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.initializeApp)(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)(Ft,{}),this.props.isAuth?Object(r.jsx)(h,{}):null,Object(r.jsx)("div",{className:"app-wrapper-content",children:Object(r.jsx)(c.Suspense,{fallback:Object(r.jsx)($,{}),children:Object(r.jsxs)(O.d,{children:[Object(r.jsx)(O.b,{exact:!0,path:"/",render:function(){return Object(r.jsx)(O.a,{to:"/profile"})}}),Object(r.jsx)(O.b,{path:"/profile/:id?",render:function(){return Object(r.jsx)(De,{})}}),Object(r.jsx)(O.b,{path:"/dialogs",render:function(){return Object(r.jsx)(W,{})}}),Object(r.jsx)(O.b,{path:"/music",component:tn}),Object(r.jsx)(O.b,{path:"/news",component:en}),Object(r.jsx)(O.b,{path:"/users",component:gt}),Object(r.jsx)(O.b,{path:"/settings",component:m}),Object(r.jsx)(O.b,{path:"/login",component:zt}),Object(r.jsx)(O.b,{path:"*",render:function(){return Object(r.jsx)("div",{children:"404 PAGE NOT FOUND :("})}})]})})})]}):Object(r.jsx)($,{})}}]),n}(c.Component),rn=Object(F.d)(O.g,Object(f.b)((function(e){return{initialized:e.app.initialized,isAuth:e.auth.isAuth}}),{initializeApp:function(){return function(){var e=Object(be.a)(pe.a.mark((function e(t){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Tt()).then((function(){t(Bt())}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(nn),an=function(){return Object(r.jsx)(b.a,{children:Object(r.jsx)(f.a,{store:$t,children:Object(r.jsx)(rn,{})})})};s.a.render(Object(r.jsx)(an,{}),document.getElementById("root"))},35:function(e,t,n){e.exports={form:"loginForm_form__3Vb_K",input:"loginForm_input__ziBHz",checkbox:"loginForm_checkbox__3e9UO",remember:"loginForm_remember__jXYoO",button:"loginForm_button__1C0af"}},49:function(e,t,n){e.exports={formControl:"formControls_formControl__nwszG",error:"formControls_error__23Zih",summaryError:"formControls_summaryError__4h2HN"}},78:function(e,t,n){e.exports={dialogs:"dialogs_dialogs__14W0_",messages:"dialogs_messages__Odv3N"}},80:function(e,t,n){e.exports={description:"profileInfo_description__3o5_0",profilePhoto:"profileInfo_profilePhoto__splgS",contacts:"profileInfo_contacts__3I2Gx"}},81:function(e,t,n){e.exports={paginator:"paginator_paginator__2ARdb",pageNumber:"paginator_pageNumber__2YQgy",selectedPage:"paginator_selectedPage__2Px8m"}}},[[300,1,2]]]);
//# sourceMappingURL=main.ac10f82b.chunk.js.map