{"version":3,"sources":["component/pages/chat/chatPage.tsx"],"names":["ws","WebSocket","ChatPage","Chat","Messages","AddMessageForm","useState","messages","setMessages","useEffect","addEventListener","e","prevState","JSON","parse","data","style","height","overflowY","map","m","index","Message","message","src","photo","userName","setMessage","onChange","target","value","onClick","send"],"mappings":"iJAEMA,EAAK,IAAIC,UAAU,gEAgBVC,UANY,WACvB,OACI,cAACC,EAAD,KAOR,IAAMA,EAAiB,WAEnB,OACI,gCACI,cAACC,EAAD,IACA,cAACC,EAAD,QAKND,EAAqB,WAAO,IAAD,EAEGE,mBAA4B,IAF/B,mBAEtBC,EAFsB,KAEZC,EAFY,KAU7B,OANAC,qBAAU,WACNT,EAAGU,iBAAiB,WAAW,SAACC,GAC5BH,GAAY,SAAAI,GAAS,4BAAQA,GAAR,YAAsBC,KAAKC,MAAMH,EAAEI,gBAE7D,IAGC,qBAAKC,MAAO,CAACC,OAAQ,QAASC,UAAW,QAAzC,SACKX,EAASY,KAAI,SAACC,EAAGC,GACd,OAAO,cAACC,EAAD,CAAqBC,QAASH,GAAhBC,SAO/BC,EAAgD,SAAC,GAAe,IAAdC,EAAa,EAAbA,QACpD,OACI,gCACI,qBAAKC,IAAKD,EAAQE,QADtB,IAC+B,4BAAIF,EAAQG,WACvC,uBACCH,EAAQA,YAKflB,EAA2B,WAAO,IAAD,EACLC,mBAAS,IADJ,mBAC5BiB,EAD4B,KACnBI,EADmB,KASnC,OACI,gCACI,8BACI,0BAAUC,SAAU,SAACjB,GAAD,OAAOgB,EAAWhB,EAAEkB,OAAOC,QAAQA,MAAOP,MAElE,8BACI,wBAAQQ,QAbA,WACXR,IAGLvB,EAAGgC,KAAKT,GACRI,EAAW,MAQH","file":"static/js/5.ac85512d.chunk.js","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\n\r\nconst ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx');\r\n\r\nexport type ChatMessageType = {\r\n    message: string,\r\n    photo: string,\r\n    userId: number,\r\n    userName: string\r\n}\r\n\r\n\r\nconst ChatPage: React.FC = () => {\r\n    return (\r\n        <Chat/>\r\n    );\r\n};\r\n\r\nexport default ChatPage;\r\n\r\n\r\nconst Chat: React.FC = () => {\r\n\r\n    return (\r\n        <div>\r\n            <Messages/>\r\n            <AddMessageForm/>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Messages: React.FC = () => {\r\n\r\n    const [messages, setMessages] = useState<ChatMessageType[]>([]);\r\n\r\n    useEffect(() => {\r\n        ws.addEventListener('message', (e) => {\r\n            setMessages(prevState => [...prevState, ...JSON.parse(e.data)]);\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <div style={{height: '200px', overflowY: 'auto'}}>\r\n            {messages.map((m, index) => {\r\n                return <Message key={index} message={m} />;\r\n            })}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst Message: React.FC<{message: ChatMessageType}> = ({message}) => {\r\n    return (\r\n        <div>\r\n            <img src={message.photo}/> <b>{message.userName}</b>\r\n            <br/>\r\n            {message.message}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst AddMessageForm: React.FC = () => {\r\n    const [message, setMessage] = useState('');\r\n    const sendMessage = () => {\r\n        if (!message) {\r\n            return;\r\n        }\r\n        ws.send(message);\r\n        setMessage('');\r\n    };\r\n    return (\r\n        <div>\r\n            <div>\r\n                <textarea onChange={(e) => setMessage(e.target.value)} value={message}/>\r\n            </div>\r\n            <div>\r\n                <button onClick={sendMessage}>Send</button>\r\n            </div>\r\n        </div>\r\n    );\r\n};"],"sourceRoot":""}